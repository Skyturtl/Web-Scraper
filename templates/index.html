<!DOCTYPE html>
<html>
<head>
    <title>Search Engine</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        form { margin-bottom: 20px; }
        input[type="text"], select {
            width: 70%; padding: 10px; font-size: 16px; margin-bottom: 10px;
        }
        button { padding: 10px 15px; font-size: 16px; background-color: #007BFF; color: white; border: none; cursor: pointer; }
        button:hover { background-color: #0056b3; }
        ul { list-style-type: none; padding: 0; }
        li { margin-bottom: 20px; padding: 10px; border: 1px solid #ddd; border-radius: 5px; }
        a { text-decoration: none; color: #007BFF; }
        a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>Search Engine</h1>
    <form method="POST" action="/index.html">
        <input type="text" name="query" placeholder="Enter your query" value="{{ query }}" required>
        <button type="submit">Search</button>
    
    </form>

    <ul>
        {% for result in results %}
        <li><!-- Add this section below the existing fields -->
            <strong>TF-IDF Calculation Details:</strong><br>
            {% for term, details in result['calc_details'].items() %}
                • Term: {{ term }}<br>
                &nbsp;&nbsp;- Document Frequency: {{ details.doc_count }}/{{ result.total_docs }}<br>
                &nbsp;&nbsp;- Term Frequency: {{ details.term_freq }} (of {{ details.total_terms }} total terms)<br>
                &nbsp;&nbsp;- TF: {{ details.tf }}<br>
                &nbsp;&nbsp;- IDF: log({{ result.total_docs }}/{{ details.doc_count }}) = {{ details.idf }}<br>
                &nbsp;&nbsp;- TF-IDF: {{ details.tf }} × {{ details.idf }} = {{ details.tfidf }}<br>
            {% endfor %}
            
            <strong>Keyword Appearances:</strong> {{ result['keyword_count'] }}<br>
            <strong>Score (Rank):</strong> {{ result['score'] }} ({{ result['rank'] }})<br>
            <strong>Title:</strong> <a href="{{ result['page_detail']['url'] }}">{{ result['page_detail']['title'] }}</a><br>
            <strong>URL:</strong> {{ result['page_detail']['url'] }}<br>
            <strong>Last Modified:</strong> {{ result['page_detail']['last_modified'] }}<br>
            <strong>Size:</strong> {{ result['page_detail']['size'] }} bytes<br>
            <strong>Keywords:</strong> {{ result['page_detail']['keywords'] }}<br>
            
            <strong>Parent Links:</strong>
            
            <ul>
                {% set parent_links = result['page_detail']['parent_links'] %}
                {% set displayed_parents = parent_links[:3] %}
                {% for link in displayed_parents %}
                    <a href="{{ link }}">{{ link }}</a><br>
                {% endfor %}
            </ul>
            (Showing {{ displayed_parents|length }} of {{ parent_links|length }} parent links)<br>
           
            <strong>Child Links:</strong>
            <ul>
                {% set child_links = result['page_detail']['child_links'] %}
                {% set displayed_children = child_links[:3] %}
                {% for link in displayed_children %}
                    <a href="{{ link }}">{{ link }}</a><br>
                {% endfor %}
            </ul>
            (Showing {{ displayed_children|length }} of {{ child_links|length }} child links)<br>
        </li>
        {% endfor %}
    </ul>
</body>
</html>